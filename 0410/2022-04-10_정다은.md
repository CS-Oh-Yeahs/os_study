## Paging
### ğŸ“‚  Two-Level Page Table

> *ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë¨ì€ ì¼ë¶€ ì£¼ì†Œ ê³µê°„ë§Œ í™œìš©í•˜ë¯€ë¡œ **page table ê³µê°„ì´ ë‚­ë¹„**ë¨*
> 
> - *32 bit address ì‚¬ìš© ì‹œ 4Gì˜ ì£¼ì†Œ ê³µê°„ í•„ìš”*
> - *page sizeê°€ 4K ì‹œ 1Mê°œì˜ page table entry í•„ìš”*
> - *page entryê°€ 4byte ì‹œ í”„ë¡œì„¸ìŠ¤ ë‹¹ 4Mì˜ page table í•„ìš”*

- **outer-page tableì€ ì „ì²´ ë…¼ë¦¬ì  í˜ì´ì§€ ë§Œí¼ ë§Œë“¤ì–´ì§€ì§€ë§Œ, inner-page tableì€ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ì— ëŒ€í•´ì„œë§Œ ë§Œë“¤ì–´ì§** ğŸ‘‰ í˜ì´ì§€ í…Œì´ë¸”ì˜ ê³µê°„ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ
- (page number, page offset) â†’ (page number 1, page number 2, page offset)
- page number 1 : **outer page tableì˜ index**
- page number 2 : **outer page tableì˜ pageì—ì„œì˜ ë³€ìœ„(displacement)**

ğŸš¨ **Logical Address (on 32-bit machine with 4KB page size)**

> *cf)
1 Byte = 8 Bits
1 KB = 1024 Byte (2^10 Byte)
1 MB = 1024 KB (2^10 KB)
...*
> 
- page í•˜ë‚˜ì˜ í¬ê¸°ê°€ 4KB(2^12byte)

â‡’ í˜ì´ì§€ ì•ˆì—ì„œ byte ë‹¨ìœ„ë¡œ ì–¼ë§ˆë‚˜ ë–¨ì–´ì ¸ ìˆëŠ”ì§€ ì•Œì•„ë³´ëŠ” page offsetì„ ìœ„í•´ì„œ 12bit í•„ìš”

- **inner-page tableì˜ í¬ê¸°ê°€ page í¬ê¸°ì™€ ë™ì¼ = 4KB**

â‡’ ê° entryëŠ” 4byteì´ë¯€ë¡œ entryì˜ ìˆ˜ëŠ” 1Kê°œ

â‡’ 1K(2^10)ê°œì˜ ì—”íŠ¸ë¦¬ ìœ„ì¹˜ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ì„œ p2ëŠ” 10bit í•„ìš”

- p1ì€ ì „ì²´ 32bit - 12bit - 10bit = 10bit

### ğŸ“‚ Multilevel Paging and Performance

- address spaceê°€ ì»¤ì§€ë©´ ë‹¤ë‹¨ê³„ í˜ì´ì§€ í…Œì´ë¸” í•„ìš”
- ê° ë‹¨ê³„ì˜ í˜ì´ì§€ í…Œì´ë¸”ì´ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ë¯€ë¡œ ë” ë§ì€ ë©”ëª¨ë¦¬ ì ‘ê·¼ í•„ìš”
- **TLB**ë¥¼ í†µí•´ ë©”ëª¨ë¦¬ ì ‘ê·¼ ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ

### ğŸ“‚ Valid / Invalid Bit

> *í˜ì´ì§• í…Œì´ë¸”ì—ëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì£¼ì†Œ ì˜ì—­ì„ ìœ„í•´ì„œë„ ì—”íŠ¸ë¦¬ê°€ ë§Œë“¤ì–´ì ¸ì•¼ í•œë‹¤ ğŸ‘‰ í…Œì´ë¸”ì´ë¼ëŠ” ìë£Œ êµ¬ì¡° íŠ¹ì„± ìƒ ìœ„ì—ì„œë¶€í„° ì ‘ê·¼í•´ì•¼ í•˜ê¸° ë•Œë¬¸*
> 
- í˜ì´ì§• í…Œì´ë¸”ì— frame number ì´ì™¸ì— ì¶”ê°€ì ìœ¼ë¡œ ì €ì¥ë˜ëŠ” ì •ë³´
- **ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í˜ì´ì§€ì— ëŒ€í•´ invalid í‘œì‹œ**
- **valid ì ‘ê·¼ í—ˆìš©**
    - í˜ì´ì§€ í…Œì´ë¸” ì—”íŠ¸ë¦¬ í•´ë‹¹ ì£¼ì†Œì˜ frameì— ê·¸ í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ì„±í•˜ëŠ” ìœ íš¨í•œ ë‚´ìš©ì´ ìˆìŒ ë©”ëª¨ë¦¬ì— ì‹¤ì œë¡œ ì˜¬ë¼ì™€ ìˆë‹¤ëŠ” ëœ»
- **invalid ì ‘ê·¼ ë¶ˆí—ˆ**
    - í”„ë¡œì„¸ìŠ¤ê°€ ê·¸ ì£¼ì†Œ ë¶€ë¶„ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°
    - ë‹¹ì¥ í•„ìš”í•˜ì§€ ì•Šì€ ì •ë³´ë¼ backing store(swap area)ì— ë‚´ë ¤ê°€ ìˆëŠ” ê²½ìš°

### ğŸ“‚ Protection Bit

- í˜ì´ì§€ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ
- í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•˜ë¯€ë¡œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ë‚´ í˜ì´ì§€ì— ì ‘ê·¼í•  ì¼ì€ ì—†ìŒ
- **ì–´ë–¤ ì—°ì‚°ì— ëŒ€í•œ ê¶Œí•œì´ ìˆëŠ”ì§€** ë‚˜íƒ€ë‚´ëŠ” ê²ƒ (read/write/read-only)

### ğŸ“‚ Inverted Page Table

- ì‹œìŠ¤í…œ ì•ˆì— í˜ì´ì§€ í…Œì´ë¸”ì´ ë”± í•˜ë‚˜ë§Œ ì¡´ì¬ â­• ê° í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ì¡´ì¬ âŒ
    - **í˜ì´ì§€ í…Œì´ë¸”ì„ ìœ„í•œ ê³µê°„ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ**
- **ì—”íŠ¸ë¦¬ê°€ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ì˜ í˜ì´ì§€ í”„ë ˆì„ ê°œìˆ˜ ë§Œí¼ ì¡´ì¬**
    - ex) ì²« ë²ˆì§¸ ì—”íŠ¸ë¦¬ì—ëŠ” ì²« ë²ˆì§¸ í”„ë ˆì„ì— ë“¤ì–´ê°€ëŠ” ë…¼ë¦¬ì  í˜ì´ì§€ì˜ ì£¼ì†Œê°€ ë“¤ì–´ê°
- ì£¼ì†Œ ë³€í™˜ì´ë¼ëŠ” ê²ƒì€ ë…¼ë¦¬ì  â†’ ë¬¼ë¦¬ì , Inverted Page Tableì€ ë¬¼ë¦¬ì  â†’ ë…¼ë¦¬ì 
    - **ëª¨ë“  ì—”íŠ¸ë¦¬ë¥¼ ì „ë¶€ ê²€ìƒ‰í•´ë´ì•¼ í•˜ë¯€ë¡œ** ì‹œê°„ì  ì˜¤ë²„í—¤ë“œ ë°œìƒ
    - **associative register**ì„ ì‚¬ìš©í•˜ì—¬ **ë³‘ë ¬ì ìœ¼ë¡œ ê²€ìƒ‰**í•  ìˆ˜ ìˆë„ë¡ í•¨
- ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ì˜ í˜ì´ì§€ì¸ì§€ **pid ë˜í•œ í•¨ê»˜ ì €ì¥**í•´ì•¼í•¨

### ğŸ“‚ Shared Pages

- Re-entrant Code (=Pure Code)
- **Read-only**ë¡œ ì„¸íŒ…í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ ê°„ í•˜ë‚˜ì˜ codeë§Œ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¼
- **ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì˜ ë™ì¼í•œ ë…¼ë¦¬ì  ì£¼ì†Œ ê³µê°„ì— ìœ„ì¹˜**í•´ì•¼ í•¨

---

## Segmentation

### ğŸ“‚ Segmentation Architecture

- Logical Addressì˜ êµ¬ì„±
    - **segmentation-number**
    - **offset** : ì„¸ê·¸ë©˜í…Œì´ì…˜ ì•ˆì—ì„œ ì–¼ë§ˆë‚˜ ë–¨ì–´ì ¸ ìˆëŠ”ì§€
- **Segment Table**
    
    âœ… *í˜ì´ì§• í…Œì´ë¸”ê³¼ ë‹¬ë¦¬*
    
    - ì—”íŠ¸ë¦¬ì— ë‘ ê°€ì§€ ì •ë³´ë¥¼ ê°€ì§
        - ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ìƒì˜ ì‹œì‘ ìœ„ì¹˜ base
        - ì„¸ê·¸ë¨¼íŠ¸ì˜ ê¸¸ì´ limit *(ì˜ë¯¸ ê¸°ì¤€ìœ¼ë¡œ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ë‚˜ëˆ„ë¯€ë¡œ ì„¸ê·¸ë¨¼íŠ¸ì˜ ê¸¸ì´ê°€ ê· ì¼í•˜ì§€ ì•Šì„ ìˆ˜ ìˆê¸° ë•Œë¬¸)*
    - **Allocation ë¬¸ì œ** ì„¸ê·¸ë¨¼íŠ¸ì˜ ê¸¸ì´ê°€ ë™ì¼í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ **ê°€ë³€ ë¶„í•  ë°©ì‹ì—ì„œì™€ ë™ì¼í•œ ë¬¸ì œì ë“¤ì´ ë°œìƒ**
    - **ì˜ë¯¸ ë‹¨ìœ„ë¡œ ì¼í•˜ëŠ” ê²ƒì—ëŠ” ì¥ì **
        - **Protection** ê° ì„¸ê·¸ë¨¼íŠ¸ ë³„ë¡œ protection bitê°€ ìˆìŒ (Read/Write/Execution ê¶Œí•œ bit)
        - **Sharing**ì—ì„œë„ í˜ì´ì§•ë³´ë‹¤ í›¨ì”¬ íš¨ê³¼ì 
    - *ì‹¤ì œì ìœ¼ë¡œ í…Œì´ë¸”ì„ ìœ„í•œ ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ì‹¬í•œ ìª½ì€ ì„¸ê·¸ë©˜í…Œì´ì…˜ì´ ì•„ë‹ˆë¼ í˜ì´ì§•*
- **STBR (Segment-Table Base Register)** : ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ì—ì„œì˜ segment table ìœ„ì¹˜
- **STLR (Segment-Table Limit Register)** : í”„ë¡œê·¸ë¨ì´ ì‚¬ìš©í•˜ëŠ” segmentì˜ ìˆ˜

> *ğŸš¨ Legalí•œ ì ‘ê·¼ì¸ì§€ ì²´í¬
i) ë…¼ë¦¬ ì£¼ì†Œì˜ ì„¸ê·¸ë¨¼íŠ¸ ë²ˆí˜¸ê°€ STLR ë³´ë‹¤ ì‘ì€ ê°’ì¸ì§€ ì²´í¬
ii) ì„¸ê·¸ë¨¼íŠ¸ì˜ ê¸¸ì´ë³´ë‹¤ ì˜¤í”„ì…‹ ê°’ì´ ë” ì‘ì€ì§€ ì²´í¬*
> 

---

### ğŸ“‚ Paged Segmentation

- ì„¸ê·¸ë¨¼íŠ¸ í•˜ë‚˜ê°€ ì—¬ëŸ¬ ê°œì˜ í˜ì´ì§€ë¡œ êµ¬ì„±
- **segment-table entry**ê°€ segmentì˜ base addressë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **segmentë¥¼ êµ¬ì„±í•˜ëŠ” page tableì˜ base addressë¥¼ ê°€ì§€ê³  ìˆìŒ**
- ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°ˆ ë•ŒëŠ” í˜ì´ì§€ ë‹¨ìœ„ë¡œ ì˜¬ë¼ê° ğŸ‘‰ **Allocation ë¬¸ì œ ë°œìƒ âŒ**
